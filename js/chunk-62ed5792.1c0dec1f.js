(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-62ed5792"],{"06db":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{centered:"",title:e.title,width:1200,visible:e.visible,cancelText:"关闭"},on:{ok:e.handleOk,cancel:e.handleCancel}},[a("a-row",{attrs:{gutter:18}},[a("a-col",{attrs:{span:16}},[a("a-card",{attrs:{title:"选择人员",bordered:!0}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{span:10}},[a("a-form-item",{attrs:{label:"姓名"}},[a("a-input",{attrs:{placeholder:"请输入姓名"},model:{value:e.queryParam.name,callback:function(t){e.$set(e.queryParam,"name",t)},expression:"queryParam.name"}})],1)],1),a("a-col",{attrs:{span:8}},[a("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[a("a-button",{attrs:{type:"primary",icon:"search"},on:{click:e.searchQuery}},[e._v("查询")]),a("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary",icon:"reload"},on:{click:e.searchReset}},[e._v("重置")])],1)])],1)],1)],1),a("div",[a("a-table",{attrs:{size:"small",bordered:"",rowKey:"id",columns:e.columns1,dataSource:e.dataSource1,pagination:e.ipagination,loading:e.loading,scroll:{y:240},rowSelection:{selectedRowKeys:e.selectedRowKeys,onSelectAll:e.onSelectAll,onSelect:e.onSelect,onChange:e.onSelectChange}},on:{change:e.handleTableChange}})],1)])],1),a("a-col",{attrs:{span:8}},[a("a-card",{attrs:{title:"用户选择",bordered:!0}},[a("div",[a("a-table",{attrs:{size:"small",bordered:"",rowKey:"id",columns:e.columns2,dataSource:e.dataSource2,loading:e.loading,scroll:{y:240}},scopedSlots:e._u([{key:"action",fn:function(t,n){return a("span",{},[a("a-button",{attrs:{type:"primary",size:"small",icon:"delete"},on:{click:function(t){return e.handleDelete(n)}}},[e._v("删除")])],1)}}])})],1)])],1)],1)],1)},s=[],i=(a("ac6a"),a("456d"),a("96cf"),a("3b8d")),r=a("ca00"),o=a("0fea"),c={name:"JSelectMultiUserModal",data:function(){return{title:"用户列表",names:[],visible:!1,placement:"right",description:"人员管理页面",queryParam:{},columns1:[{title:"用户代码",align:"center",width:100,dataIndex:"username"},{title:"用户名称",align:"center",width:100,dataIndex:"realname"},{title:"邮箱",align:"center",width:180,dataIndex:"email"}],columns2:[{title:"用户账号",align:"center",width:100,dataIndex:"username"},{title:"操作",dataIndex:"action",align:"center",width:100,scopedSlots:{customRender:"action"}}],dataSource1:[],dataSource2:[],ipagination:{current:1,pageSize:30,pageSizeOptions:["30","50","80"],showTotal:function(e,t){return t[0]+"-"+t[1]+" 共"+e+"条"},showQuickJumper:!0,showSizeChanger:!0,total:0},isorter:{column:"username",order:"desc"},loading:!1,selectedRowKeys:[],selectedRows:[]}},created:function(){this.loadData()},methods:{searchQuery:function(){this.loadData(1)},searchReset:function(){this.queryParam={},this.loadData(1)},handleCancel:function(){this.visible=!1},handleOk:function(){this.$emit("selectFinished",this.dataSource2),this.visible=!1},add:function(){this.visible=!0},loadData:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){var a,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return 1===t&&(this.ipagination.current=1),a=this.getQueryParams(),e.next=4,Object(o["H"])(a);case 4:n=e.sent,this.dataSource1=n.records,this.ipagination.total=n.total;case 7:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),getQueryParams:function(){var e=Object.assign({},this.queryParam,this.isorter);return e.field=this.getQueryField(),e.pageNo=this.ipagination.current,e.pageSize=this.ipagination.pageSize,Object(r["c"])(e)},getQueryField:function(){},onSelectAll:function(e,t,a){if(!0===e)for(var n=0;n<a.length;n++)this.dataSource2.push(a[n]);else for(var s=0;s<a.length;s++)this.dataSource2.splice(this.dataSource2.indexOf(a[s]),1)},onSelect:function(e,t){if(!0===t)this.dataSource2.push(e);else{var a=this.dataSource2.indexOf(e);a>=0&&this.dataSource2.splice(this.dataSource2.indexOf(e),1)}},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectionRows=t},onClearSelected:function(){this.selectedRowKeys=[],this.selectionRows=[]},handleDelete:function(e){this.dataSource2.splice(this.dataSource2.indexOf(e),1)},handleTableChange:function(e,t,a){Object.keys(a).length>0&&(this.isorter.column=a.field,this.isorter.order="ascend"==a.order?"asc":"desc"),this.ipagination=e,this.loadData()}}},l=c,u=(a("a7261"),a("2877")),p=Object(u["a"])(l,n,s,!1,null,"55241771",null);t["default"]=p.exports},"0f9d":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{width:"100%"}},[a("a-select",{staticStyle:{width:"calc(100% - 178px)"},attrs:{mode:"multiple",placeholder:"Please select",value:e.nameList}}),a("span",{staticStyle:{display:"inline-block",width:"170px",float:"right",overflow:"hidden"}},[a("a-button",{staticStyle:{width:"81px"},attrs:{type:"primary",icon:"search"},on:{click:e.handleSelect}},[e._v("选择")]),a("a-button",{staticStyle:{"margin-left":"8px",width:"81px"},attrs:{type:"primary",icon:"reload"},on:{click:e.selectReset}},[e._v("清空")])],1),a("j-select-multi-user-modal",{ref:"selectModal",on:{selectFinished:e.selectOK}})],1)},s=[],i=a("06db"),r={name:"JSelectMultiUser",components:{JSelectMultiUserModal:i["default"]},props:{value:{type:String,required:!1}},data:function(){return{selectList:[]}},computed:{nameList:function(){for(var e=[],t=0;t<this.selectList.length;t++)e.push(this.selectList[t].username);var a="";return e.length>0&&(a=e.join(",")),this.$emit("change",a),e}},model:{prop:"value",event:"change"},methods:{handleSelect:function(){this.$refs.selectModal.add()},selectReset:function(){this.selectList=[]},selectOK:function(e){this.selectList=e}}},o=r,c=a("2877"),l=Object(c["a"])(o,n,s,!1,null,null,null);t["default"]=l.exports},3557:function(e,t,a){},"456d":function(e,t,a){var n=a("4bf8"),s=a("0d58");a("5eda")("keys",function(){return function(e){return s(n(e))}})},"492d":function(e,t,a){"use strict";var n=a("3557"),s=a.n(n);s.a},"4be9":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{class:{abcdefg:!0},attrs:{bordered:!1}},[a("div",{staticClass:"no-print",staticStyle:{"text-align":"right"}},["print"==e.pageType?a("a-button",{directives:[{name:"print",rawName:"v-print",value:"#printContent",expression:"'#printContent'"}],attrs:{ghost:"",type:"primary"},on:{click:e.handlePrint}},[e._v("打印")]):e._e(),"workflowing"==e.pageType||"notifying"==e.pageType?a("a-button",{staticStyle:{display:"none"},attrs:{ghost:"",type:"primary"},on:{click:e.handleSubmitWF}},[e._v("提交")]):e._e()],1),a("section",{ref:"print",staticClass:"abcdefg",attrs:{id:"printContent"}},[a("div",{staticStyle:{"text-align":"center"}},[a("p",{staticStyle:{"font-size":"24px","font-weight":"800","margin-bottom":"35px","margin-top":"15px"}},[e._v(e._s(e.formName))])]),a("a-col",{attrs:{md:24,sm:24}},[a("div",{staticClass:"sign",staticStyle:{"text-align":"left",height:"inherit","margin-left":"35px"}},["undefined"!=typeof e.curRow.no&&null!=e.curRow.no?a("a-col",{staticStyle:{"margin-top":"10px","margin-bottom":"10px"},attrs:{span:24}},[a("span",{staticStyle:{float:"left",display:"block"}},[e._v("表单编号:")]),a("div",{staticStyle:{float:"left",width:"78%",display:"block","border-bottom":"1px solid #cecece","padding-left":"20px"},domProps:{innerHTML:e._s(e.curRow.no)}})]):e._e(),"undefined"!=typeof e.curRow.file_name&&null!=e.curRow.file_name?a("a-col",{staticStyle:{"margin-top":"10px","margin-bottom":"10px"},attrs:{span:24}},[a("span",{staticStyle:{float:"left",display:"block"}},[e._v(e._s(e.curRow.fileNameTitle)+":")]),a("div",{staticStyle:{float:"left",width:"78%",display:"block","border-bottom":"1px solid #cecece","padding-left":"20px"},domProps:{innerHTML:e._s(e.curRow.file_name)}})]):e._e(),a("a-col",{staticStyle:{"margin-top":"10px","margin-bottom":"10px"},attrs:{span:24}},[a("span",[e._v("申请人员:")]),a("a-input",{staticStyle:{width:"30%"},attrs:{readonly:""},model:{value:e.curRow.create_by,callback:function(t){e.$set(e.curRow,"create_by",t)},expression:"curRow.create_by"}}),a("span",{staticStyle:{"margin-left":"12.5%"}},[e._v("申请时间:")]),a("a-input",{staticStyle:{width:"30%"},attrs:{readonly:""},model:{value:e.curRow.create_time,callback:function(t){e.$set(e.curRow,"create_time",t)},expression:"curRow.create_time"}})],1),a("a-col",{staticStyle:{"margin-bottom":"10px"},attrs:{span:24}},[a("span",[e._v("所属部门:")]),a("a-input",{staticStyle:{width:"30%"},attrs:{readonly:""},model:{value:e.depart.depart_name,callback:function(t){e.$set(e.depart,"depart_name",t)},expression:"depart.depart_name"}}),a("span",{staticStyle:{"margin-left":"12.5%"}},[e._v(e._s(e.curRow.formTypeName)+"类型:")]),a("a-input",{staticStyle:{width:"30%"},attrs:{readonly:""},model:{value:e.curRow.leave_type_name,callback:function(t){e.$set(e.curRow,"leave_type_name",t)},expression:"curRow.leave_type_name"}})],1),a("a-col",{staticStyle:{"margin-bottom":"10px"},attrs:{span:24}},[a("span",[e._v(e._s(e.curRow.startTimeName)+"时间:")]),a("a-input",{staticStyle:{width:"30%"},attrs:{readonly:""},model:{value:e.curRow.starttime,callback:function(t){e.$set(e.curRow,"starttime",t)},expression:"curRow.starttime"}}),a("span",{staticStyle:{"margin-left":"12.5%"}},[e._v(e._s(e.curRow.endTimeName)+"时间:")]),a("a-input",{staticStyle:{width:"30%"},attrs:{readonly:""},model:{value:e.curRow.endtime,callback:function(t){e.$set(e.curRow,"endtime",t)},expression:"curRow.endtime"}})],1),a("a-col",{staticStyle:{"margin-bottom":"10px"},attrs:{span:24}},[a("span",[e._v(e._s(e.curRow.formTypeName)+"天数:")]),a("a-input",{staticStyle:{width:"30%"},attrs:{readonly:""},model:{value:e.curRow.total_days,callback:function(t){e.$set(e.curRow,"total_days",t)},expression:"curRow.total_days"}}),a("span",{staticStyle:{"margin-left":"12.5%"}},[e._v("流程状态:")]),a("a-input",{staticStyle:{width:"30%"},attrs:{readonly:""},model:{value:e.curRow.bpm_status_name,callback:function(t){e.$set(e.curRow,"bpm_status_name",t)},expression:"curRow.bpm_status_name"}})],1),a("a-col",{attrs:{span:24}}),a("a-col",{staticStyle:{"margin-top":"20px"},attrs:{span:24}},[a("span",{staticStyle:{float:"left",display:"block"}},[e._v(e._s(e.curRow.formTypeName)+"内容:")]),a("div",{staticStyle:{float:"left",width:"78%",display:"block","border-bottom":"1px solid #cecece","padding-left":"20px"},domProps:{innerHTML:e._s(e.curRow.content)}})]),"undefined"!=typeof e.curRow.location&&null!=e.curRow.location?a("a-col",{staticStyle:{"margin-top":"30px"},attrs:{span:24}},[a("span",{staticStyle:{float:"left",display:"block"}},[e._v(e._s(e.curRow.formTypeName)+"地址:")]),a("div",{staticStyle:{float:"left",width:"78%",display:"block","border-bottom":"1px solid #cecece","padding-left":"20px"},domProps:{innerHTML:e._s(e.curRow.location)}})]):e._e(),1==e.curRow.main_table_status?a("a-col",{staticStyle:{"margin-top":"30px"},attrs:{span:20}},[[a("a-table",{attrs:{columns:e.columns,dataSource:e.data,loading:e.loading,pagination:!1}})]],2):e._e(),1!=this.curRow.fileStatus&&"print"!=this.pageType&&this.curRow.fileType.includes("office")?a("a-col",{staticStyle:{"margin-top":"10px"},attrs:{span:24}},[a("div",{staticStyle:{width:"90%"}},[a("a-divider",{staticStyle:{width:"90%"},attrs:{dashed:""}})],1)]):e._e(),1!=this.curRow.fileStatus&&"print"!=this.pageType?a("a-col",{staticStyle:{"margin-top":"2px"},attrs:{span:24}},[[this.curRow.fileType.includes("office")?a("div",{class:[1!=this.curRow.fileStatus?"fileshow":"filenone"],staticStyle:{width:"100%",display:"block"}},[a("iframe",{directives:[{name:"print",rawName:"v-print",value:"#printContent",expression:"'#printContent'"}],staticClass:"no-print",staticStyle:{display:"block",width:"90%",align:"left",height:"720px","overflow-y":"auto","overflow-x":"hidden",border:"1px solid #cecece","border-bottom":"1px solid #cecece"},attrs:{src:this.curRow.fileURL}})]):e._e()]],2):e._e(),1!=this.curRow.fileStatus&&"print"!=this.pageType&&this.curRow.fileType.includes("image")?a("a-col",{staticStyle:{"margin-top":"10px"},attrs:{span:24}},[a("div",{staticStyle:{width:"90%"}},[a("a-divider",{staticStyle:{width:"90%"},attrs:{dashed:""}},[e._v("·")])],1)]):e._e(),1!=this.curRow.fileStatus&&"print"!=this.pageType?a("a-col",{staticStyle:{"margin-top":"2px"},attrs:{span:24}},[[this.curRow.fileType.includes("image")?a("div",{class:[1!=this.curRow.fileStatus?"fileshow":"filenone"],staticStyle:{"margin-botton":"0px"}},[a("div",{staticStyle:{"margin-bottom":"10px"}},[e._v("图片附件")]),a("vue-preview",{attrs:{slides:e.slides},on:{close:e.handleClose}})],1):e._e()]],2):e._e(),1!=e.curRow.bpm_status||e.workflows.length>0?a("a-col",{staticStyle:{"margin-top":"10px"},attrs:{span:24}},[a("div",{staticStyle:{width:"90%"}},[a("a-divider",{staticStyle:{width:"90%"},attrs:{dashed:""}},[e._v("·")])],1)]):e._e(),1!=e.curRow.bpm_status||e.workflows.length>0?a("a-col",{staticStyle:{"margin-top":"10px"},attrs:{span:24}},[a("div",{staticStyle:{"margin-bottom":"20px"}},[e._v("审批流程")]),[a("a-timeline",e._l(e.workflows,function(t,n){return a("div",{key:n},[a("a-timeline-item",{attrs:{color:t.color}},["wait"==t.status?a("a-icon",{staticStyle:{"font-size":"16px"},attrs:{slot:"dot",type:"clock-circle-o",theme:"twoTone",twoToneColor:"#eb2f2f",color:t.color},slot:"dot"}):e._e(),"start"==t.status?a("a-icon",{staticStyle:{"font-size":"16px"},attrs:{slot:"dot",type:"tag",theme:"twoTone",twoToneColor:"#5599FF",color:t.color},slot:"dot"}):e._e(),"cancel"==t.status?a("a-icon",{staticStyle:{"font-size":"16px"},attrs:{slot:"dot",type:"close-circle",theme:"twoTone",twoToneColor:"#ff0000",color:t.color},slot:"dot"}):e._e(),"agree"==t.status?a("a-icon",{staticStyle:{"font-size":"16px"},attrs:{slot:"dot",type:"check-circle",theme:"twoTone",twoToneColor:"#52ce1a",color:t.color},slot:"dot"}):e._e(),"message"==t.status?a("a-icon",{staticStyle:{"font-size":"16px"},attrs:{slot:"dot",type:"mail",theme:"twoTone",twoToneColor:t.color,color:t.color},slot:"dot"}):e._e(),"over"==t.status?a("a-icon",{staticStyle:{"font-size":"16px"},attrs:{slot:"dot",type:"flag",theme:"twoTone",twoToneColor:t.color,color:t.color},slot:"dot"}):e._e(),"sound"==t.status?a("a-icon",{staticStyle:{"font-size":"16px"},attrs:{slot:"dot",type:"sound",theme:"twoTone",twoToneColor:"orange",color:t.color},slot:"dot"}):e._e(),e._v("\n                  "+e._s(t.content)+"\n                ")],1)],1)}),0)]],2):e._e(),"workflowing"==e.pageType&&1==e.curRow.bpm_status?a("a-col",{staticStyle:{"margin-top":"30px"},attrs:{span:24}},[[a("a-form",{attrs:{form:e.form}},[a("a-form-item",{staticStyle:{width:"500px"},attrs:{label:"审核用户"}},[a("j-select-multi-user",{model:{value:e.wflowUsers,callback:function(t){e.wflowUsers=t},expression:"wflowUsers"}})],1),a("a-form-item",{staticStyle:{width:"500px"},attrs:{label:"审批用户"}},[a("j-select-multi-user",{model:{value:e.approveUser,callback:function(t){e.approveUser=t},expression:"approveUser"}})],1),a("a-form-item",{staticStyle:{width:"500px"},attrs:{label:"知会用户"}},[a("j-select-multi-user",{model:{value:e.notifyUsers,callback:function(t){e.notifyUsers=t},expression:"notifyUsers"}})],1)],1)],[a("div",{staticStyle:{width:"90%","margin-top":"10px"}},["workflowing"==e.pageType||"notifying"==e.pageType?a("a-button",{attrs:{ghost:"",type:"primary"},on:{click:e.handleSubmitWF}},[e._v("提交")]):e._e()],1)]],2):e._e(),"notifying"==e.pageType?a("a-col",{staticStyle:{"margin-top":"30px"},attrs:{span:24}},[[a("a-form",{attrs:{form:e.form}},[a("a-form-item",{staticStyle:{width:"500px"},attrs:{label:"知会用户"}},[a("j-select-multi-user",{model:{value:e.notifyUsers,callback:function(t){e.notifyUsers=t},expression:"notifyUsers"}})],1)],1)],[a("div",{staticStyle:{width:"90%","margin-top":"10px"}},["workflowing"==e.pageType||"notifying"==e.pageType?a("a-button",{attrs:{ghost:"",type:"primary"},on:{click:e.handleSubmitWF}},[e._v("提交")]):e._e()],1)]],2):e._e(),"workflow"==e.pageType?a("a-col",{staticStyle:{"margin-top":"30px"},attrs:{span:24}},[[a("div",{staticStyle:{width:"90%"}},[a("a-textarea",{staticStyle:{align:"left","text-align":"left"},attrs:{placeholder:"请输入审批意见",autosize:{minRows:2,maxRows:10}},model:{value:e.curRow.idea_content,callback:function(t){e.$set(e.curRow,"idea_content",t)},expression:"curRow.idea_content"}})],1),a("div",{staticStyle:{width:"90%","margin-top":"10px"}},[a("a-button",{staticStyle:{"margin-right":"10px","margin-top":"10px","background-color":"#2090fe",border:"1px solid #fefefe"},attrs:{type:"primary"},on:{click:e.handleApproveWF}},[e._v("同意")]),a("a-button",{staticStyle:{"margin-right":"10px","margin-top":"10px","background-color":"#fe5050",border:"1px solid #fefefe"},attrs:{type:"primary"},on:{click:e.handleRejectWF}},[e._v("驳回")])],1)]],2):e._e(),"notify"==e.pageType?a("a-col",{staticStyle:{"margin-top":"30px"},attrs:{span:24}},[[a("div",{staticStyle:{width:"90%"}},[a("a-textarea",{staticStyle:{align:"left","text-align":"left"},attrs:{placeholder:"请输入知会意见",autosize:{minRows:2,maxRows:10}},model:{value:e.curRow.idea_content,callback:function(t){e.$set(e.curRow,"idea_content",t)},expression:"curRow.idea_content"}})],1),a("div",{staticStyle:{width:"90%","margin-top":"10px"}},[a("a-button",{staticStyle:{"margin-right":"10px","margin-top":"10px","background-color":"#2090fe",border:"1px solid #fefefe"},attrs:{type:"primary"},on:{click:e.handleConfirmWF}},[e._v("确认")])],1)]],2):e._e(),a("a-modal",{attrs:{title:"温馨提示",visible:e.tipVisible,confirmLoading:e.tipConfirmLoading},on:{ok:e.tipHandleOk,cancel:e.tipHandleCancel}},[a("p",[e._v(e._s(e.tipContent))])])],1)])],1)])},s=[],i=(a("ac4d"),a("8a81"),a("ac6a"),a("28a5"),a("6762"),a("2fdb"),a("96cf"),a("3b8d")),r=a("da05"),o=a("290c"),c=a("0fea"),l=a("17fb"),u=a.n(l),p=a("261e"),d=a("0f9d"),m=a("ca00"),b=a("5d2d"),f=[],h={components:{ATextarea:p["a"],ARow:o["a"],ACol:r["b"],JSelectMultiUser:d["default"]},name:"Printgzsld",props:{reBizCode:{type:String,default:""}},data:function(){return{columns:[],data:[],loading:!1,labelCol:{xs:{span:24},sm:{span:2}},wrapperCol:{xs:{span:24},sm:{span:8}},formName:"流程申请单",curRow:{},depart:{},fileinfo:"",workflows:[],pageType:"view",wflowUsers:"",notifyUsers:"",approveUser:"",tipVisible:!1,tipContent:"",slides:f,form:this.$form.createForm(this)}},created:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(c["I"])(this);case 2:return t=e.sent,e.next=5,Object(c["a"])(t,this);case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),mounted:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(c["I"])(this);case 2:return t=e.sent,e.next=5,Object(c["a"])(t,this);case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),watch:{$route:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(c["I"])(this);case 2:return t=e.sent,e.next=5,Object(c["a"])(t,this);case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},methods:{loadData:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(c["I"])(this);case 2:return t=e.sent,e.next=5,Object(c["a"])(t,this);case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),getDate:function(){},tipHandleOk:function(e){var t=this;this.tipConfirmLoading=!0,setTimeout(function(){t.loadData(),t.tipVisible=!1,t.tipConfirmLoading=!1},300)},tipHandleCancel:function(){this.loadData(),this.tipVisible=!1},getFormFieldValue:function(e){return this.form.getFieldValue(e)},handlePrint:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.curRow.fileStatus=1,setTimeout(function(){t.curRow.fileStatus=0},1e4);case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),handleApproveWF:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t,a,n,s,i,r,o,l,p,d,f,h,_,y,w,g,x,v,S,O,j,k,R,T,C,F,D,M,U;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this,a=Object(b["a"])("cur_user"),n=Object(m["d"])((new Date).getTime(),"yyyy-MM-dd hh:mm:ss"),s=s||"同意",i=i||this.curRow.idea_content||"同意",r=t.curRow,o=Object(m["g"])("processLogID"),l=r["table_name"]||Object(m["g"])("table_name"),e.next=10,Object(c["w"])(l,o);case 10:if(r=e.sent,p=r["business_data_id"],d=r["process_audit"],Object(m["b"])(r["employee"]).includes(a["username"])||Object(m["b"])(r["employee"]).includes(a["realname"])){e.next=16;break}return t.$message.warning("您不在此审批流程记录的操作职员列中，无法进行审批操作！"),e.abrupt("return",!1);case 16:return e.next=18,Object(c["v"])(l,p);case 18:return f=e.sent,u.a.each(f,function(e){var t=e["create_time"];e["approve_user"]=a["username"],e["action"]=s,e["operate_time"]=n,e["action_opinion"]=i,e["create_time"]=Object(m["d"])(t,"yyyy-MM-dd hh:mm:ss")}),e.next=22,Object(c["o"])(f);case 22:return e.sent,e.next=25,Object(c["c"])(l,f);case 25:return e.sent,e.next=28,Object(c["s"])(l);case 28:if(h=e.sent,t.fixedWFlow=h[0],t.rights=h,!(h.length>1&&"000000000"!=r.business_code)){e.next=35;break}t.modelModal=!0,e.next=146;break;case 35:if(!(h.length<=0&&"000000000"!=r.business_code)){e.next=41;break}return t.tipVisible=!0,t.tipContent="未获取到此业务的流程权责，无法同意审批！",e.abrupt("return",!1);case 41:if(_="",y="",w=d,g=""==Object(m["b"])(y)?"":y.split(","),"000000000"==r.business_code){e.next=59;break}e.prev=46,_=","+t.fixedWFlow["audit"]+","+t.fixedWFlow["approve"]+",",y=t.fixedWFlow["notify"],e.next=57;break;case 51:return e.prev=51,e.t0=e["catch"](46),t.tipVisible=!0,t.tipContent="固化流程设置节点失败，无法进行审批操作！",e.abrupt("return",!1);case 57:e.next=72;break;case 59:e.prev=59,x=JSON.parse(r.business_data),_=","+x.audit_node+","+x.approve_node+",",g=""==Object(m["b"])(x.notify_node)?[]:[x.notify_node],w=r["employee"],e.next=72;break;case 66:return e.prev=66,e.t1=e["catch"](59),t.tipVisible=!0,t.tipContent="自由流程设置节点失败，无法进行审批操作！",e.abrupt("return",!1);case 72:if(v=_.split(","+w+","),S=v[1],""!=S){e.next=116;break}return e.next=77,Object(c["k"])(l,r["business_data_id"],{bpm_status:"3"});case 77:e.sent,O=!0,j=!1,k=void 0,e.prev=81,R=g[Symbol.iterator]();case 83:if(O=(T=R.next()).done){e.next=99;break}return C=T.value,e.next=87,Object(c["D"])(C);case 87:return F=e.sent,e.next=90,Object(c["E"])(C);case 90:return D=e.sent,M={},M="000000000"!=r.business_code?{id:Object(c["F"])(32),table_name:l,main_value:r["main_value"],business_data_id:r["business_data_id"],business_code:t.fixedWFlow["id"],process_name:t.fixedWFlow["items"],employee:F[0]["employee"],process_station:D[0]["item_text"],process_audit:C,operate_time:n,create_time:n,proponents:r["proponents"],content:r["content"],business_data:JSON.stringify(r)}:{id:Object(c["F"])(32),table_name:l,main_value:r["business_data_id"],business_data_id:r["business_data_id"],business_code:"000000001",process_name:"自由流程知会",employee:C,process_station:"自由流程知会",process_audit:"000000001",proponents:r["proponents"],content:r["content"],operate_time:n,create_time:n,business_data:r.business_data},e.next=95,Object(c["p"])(M);case 95:e.sent;case 96:O=!0,e.next=83;break;case 99:e.next=105;break;case 101:e.prev=101,e.t2=e["catch"](81),j=!0,k=e.t2;case 105:e.prev=105,e.prev=106,O||null==R.return||R.return();case 108:if(e.prev=108,!j){e.next=111;break}throw k;case 111:return e.finish(108);case 112:return e.finish(105);case 113:t.tipContent="同意审批成功，审批流程处理完毕！",e.next=145;break;case 116:return e.next=118,Object(c["k"])(l,r["business_data_id"],{bpm_status:"2"});case 118:if(e.sent,S=0==S.indexOf(",")?S.substring(1):S,S=S.split(",")[0],M={},"000000000"==r.business_code){e.next=132;break}return e.next=125,Object(c["D"])(S);case 125:return F=e.sent,e.next=128,Object(c["E"])(S);case 128:D=e.sent,M={id:Object(c["F"])(32),table_name:l,main_value:r["main_value"],business_data_id:r["business_data_id"],business_code:t.fixedWFlow["id"],process_name:t.fixedWFlow["items"],employee:F[0]["employee"],process_station:D[0]["item_text"],process_audit:S,proponents:r["proponents"],content:r["content"],create_time:n,business_data:r.business_data},e.next=133;break;case 132:M={id:Object(c["F"])(32),table_name:l,main_value:r["business_data_id"],business_data_id:r["business_data_id"],business_code:"000000000",process_name:"自由流程审批",employee:S,process_station:"自由流程审批",process_audit:"000000000",proponents:r["proponents"],content:r["content"],operate_time:n,create_time:n,business_data:r.business_data};case 133:return e.next=135,Object(c["r"])(l,r["business_data_id"]);case 135:if(U=e.sent,!U){e.next=140;break}t.tipContent="处理异常，请稍后重试；如果多次处理异常，可能需要撤销当前审批，重新发起审批流程！",e.next=145;break;case 140:return e.next=142,Object(c["n"])(M);case 142:e.sent,t.tipContent="同意审批成功，审批流程已推向后续处理人！";case 145:t.tipVisible=!0;case 146:return this.loadData(),this.pageType="view",e.abrupt("return",!0);case 150:case"end":return e.stop()}},e,this,[[46,51],[59,66],[81,101,105,113],[106,,108,112]])}));function t(){return e.apply(this,arguments)}return t}(),handleRejectWF:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t,a,n,s,i,r,o,l,p,d;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this,n=Object(b["a"])("cur_user"),s=Object(m["d"])((new Date).getTime(),"yyyy-MM-dd hh:mm:ss"),i=i||"驳回",r=r||t.curRow.idea_content||"驳回",o=t.curRow,l=Object(m["g"])("processLogID"),p=o["table_name"]||Object(m["g"])("table_name"),e.next=10,Object(c["w"])(p,l);case 10:if(o=e.sent,Object(m["b"])(o["employee"]).includes(n["username"])||Object(m["b"])(o["employee"]).includes(n["realname"])){e.next=14;break}return t.$message.warning("您不在此审批流程记录的操作职员列中，无法进行驳回操作！"),e.abrupt("return",!1);case 14:return e.next=16,Object(c["w"])(p,o["id"]);case 16:return o=e.sent,e.next=19,Object(c["v"])(p,o["business_data_id"]);case 19:return d=e.sent,u.a.each(d,function(e){var t=e["create_time"];e["approve_user"]=n["username"],e["action"]=i,e["operate_time"]=s,e["action_opinion"]=r,e["create_time"]=Object(m["d"])(t,"yyyy-MM-dd hh:mm:ss")}),e.next=23,Object(c["o"])(d);case 23:return a=e.sent,e.next=26,Object(c["c"])(p,d);case 26:return a=e.sent,e.next=29,Object(c["k"])(p,o["business_data_id"],{bpm_status:"1"});case 29:return a=e.sent,e.next=32,Object(c["k"])(p,o["business_data_id"],{bpm_status:"1"});case 32:return a=e.sent,t.tipVisible=!0,t.tipContent="驳回审批成功！",this.pageType="view",this.loadData(),e.abrupt("return",a);case 39:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),handleConfirmWF:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t,a,n,s,i,r,o,l,u,p,d;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this,n=Object(b["a"])("cur_user"),s=Object(m["d"])((new Date).getTime(),"yyyy-MM-dd hh:mm:ss"),i=i||"知会",r=r||t.curRow.idea_content||"知会确认",o=t.curRow,l=Object(m["g"])("processLogID"),u=o["table_name"]||Object(m["g"])("table_name"),e.next=10,Object(c["A"])(u,l);case 10:if(o=e.sent,o["create_time"]=s,!(Object(m["b"])(o["approve_user"]).length>=Object(m["b"])(o["employee"]).length)){e.next=22;break}return e.next=15,Object(c["o"])(o);case 15:return a=e.sent,e.next=18,Object(c["d"])(u,[o]);case 18:return a=e.sent,t.tipVisible=!0,t.tipContent="知会确认成功！",e.abrupt("return",!0);case 22:if(p=","+Object(m["b"])(o["employee"])+",",d=","+Object(m["b"])(o["approve_user"])+",",p.includes(","+n["username"]+",")||p.includes(","+n["realname"]+",")){e.next=27;break}return t.$message.warning("您不在此知会记录的操作职员列中，无法进行确认操作！"),e.abrupt("return",!1);case 27:if(!d.includes(","+n["username"]+",")&&!d.includes(","+n["realname"]+",")){e.next=30;break}return t.$message.warning("您已经在此知会记录中，执行过确认操作了！"),e.abrupt("return",!1);case 30:return o["approve_user"]=Object(m["b"])(o["approve_user"])+(""==Object(m["b"])(o["approve_user"])?"":",")+n["username"],o["action"]=i,o["operate_time"]=s,o["action_opinion"]=Object(m["b"])(o["action_opinion"])+(""==Object(m["b"])(o["action_opinion"])?"":"\n\r")+"".concat(n["username"],":").concat(r),e.next=36,Object(c["k"])("PR_LOG_INFORMED",o["id"],o);case 36:if(!(o["approve_user"].length>=o["employee"].length)){e.next=43;break}return e.next=39,Object(c["o"])(o);case 39:return a=e.sent,e.next=42,Object(c["d"])(u,[o]);case 42:a=e.sent;case 43:return t.tipVisible=!0,t.tipContent="知会确认成功！",this.pageType="view",this.loadData(),e.abrupt("return",a);case 48:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),handleSubmitWF:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t,a,n,s,i,r,o,l,u,p,d;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=Object(b["a"])("cur_user"),a=this.wflowUsers,n=this.notifyUsers,s=this.approveUser,i=Object(m["d"])(new Date,"yyyy-MM-dd hh:mm:ss"),""!=Object(m["b"])(s)||"workflowing"!=this.pageType){e.next=9;break}return this.tipVisible=!0,this.tipContent="请选择审批用户!",e.abrupt("return",!1);case 9:if(!s.includes(",")||"workflowing"!=this.pageType){e.next=13;break}return this.tipVisible=!0,this.tipContent="审批用户只能选择一个!",e.abrupt("return",!1);case 13:if(""!=Object(m["b"])(n)||"notifying"!=this.pageType){e.next=17;break}return this.tipVisible=!0,this.tipContent="请选择知会用户!",e.abrupt("return",!1);case 17:if(r=Object(m["g"])("table_name"),o={id:Object(c["F"])(32),create_by:t["username"],create_time:i,table_name:r,main_key:Object(m["g"])("id"),audit_node:Object(m["b"])(a),approve_node:Object(m["b"])(s),notify_node:Object(m["b"])(n)},""==Object(m["b"])(s)||"workflowing"!=this.pageType){e.next=53;break}return e.next=22,Object(c["m"])(o);case 22:return e.sent,o={id:Object(c["F"])(32),table_name:r,main_value:Object(m["g"])("id"),business_data_id:Object(m["g"])("id"),business_code:"000000000",process_name:"自由流程审批",employee:t["username"],process_station:"自由流程审批",process_audit:"000000000",proponents:t["username"],approve_user:t["username"],action:"发起",action_opinion:"发起自由流程",content:this.curRow["content"],operate_time:i,create_time:i,business_data:JSON.stringify(o)},e.next=26,Object(c["o"])(o);case 26:return e.sent,l=""==Object(m["b"])(a)?Object(m["b"])(s):Object(m["b"])(a).split(",")[0],o={id:Object(c["F"])(32),table_name:r,main_value:Object(m["g"])("id"),business_data_id:Object(m["g"])("id"),business_code:"000000000",process_name:"自由流程审批",employee:l,process_station:"自由流程审批",process_audit:"000000000",proponents:t["username"],content:this.curRow["content"],operate_time:i,create_time:i,business_data:JSON.stringify(o)},e.next=31,Object(c["r"])(r,this.curRow["id"]);case 31:if(u=e.sent,!u){e.next=39;break}return this.tipVisible=!0,this.tipContent="待审记录中，已经存在此记录，无法再次提交审批！",this.loadData(),e.abrupt("return",!0);case 39:return e.next=41,Object(c["n"])(o);case 41:return e.sent,e.next=45,Object(c["k"])(r,this.curRow["id"],{bpm_status:"2"});case 45:return e.sent,e.next=48,Object(c["k"])(r,this.curRow["id"],{bpm_status:"2"});case 48:return e.sent,this.tipVisible=!0,this.tipContent="提交自由流程审批成功！",this.loadData(),e.abrupt("return",!0);case 53:if(""==Object(m["b"])(n)||"notifying"!=this.pageType){e.next=74;break}return e.next=56,Object(c["u"])(Object(m["g"])("id"));case 56:if(p=e.sent,!(""!=Object(m["b"])(p)&&p.today>=3)){e.next=61;break}return this.tipVisible=!0,this.tipContent="同一业务数据，每天最多知会3次！",e.abrupt("return",!0);case 61:if(!(""!=Object(m["b"])(p)&&p.total>=10)){e.next=65;break}return this.tipVisible=!0,this.tipContent="同一业务数据，总计最多知会10次！",e.abrupt("return",!0);case 65:return d={id:Object(c["F"])(32),table_name:r,main_value:Object(m["g"])("id"),business_data_id:Object(m["g"])("id"),business_code:"000000001",process_name:"自由流程知会",employee:Object(m["b"])(n),process_station:"自由流程知会",process_audit:"000000001",operate_time:i,create_time:i,proponents:t["username"],content:this.curRow["content"],business_data:JSON.stringify(this.curRow)},e.next=68,Object(c["p"])(d);case 68:return e.sent,this.tipVisible=!0,this.tipContent="知会操作成功！",this.pageType="view",this.loadData(),e.abrupt("return",!0);case 74:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}},_=h,y=(a("492d"),a("2877")),w=Object(y["a"])(_,n,s,!1,null,"6031147a",null);t["default"]=w.exports},"5eda":function(e,t,a){var n=a("5ca1"),s=a("8378"),i=a("79e5");e.exports=function(e,t){var a=(s.Object||{})[e]||Object[e],r={};r[e]=t(a),n(n.S+n.F*i(function(){a(1)}),"Object",r)}},"96e8":function(e,t,a){},a7261:function(e,t,a){"use strict";var n=a("96e8"),s=a.n(n);s.a}}]);