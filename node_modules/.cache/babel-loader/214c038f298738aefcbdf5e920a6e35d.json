{"remainingRequest":"/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/src/views/jeecg/JeecgPdfView.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/src/views/jeecg/JeecgPdfView.vue","mtime":1571018558919},{"path":"/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { getAction } from '@/api/manage';\nimport { ACCESS_TOKEN } from \"@/store/mutation-types\";\nimport Vue from 'vue';\nimport PdfPreviewModal from \"./modules/PdfPreviewModal\";\nvar mockdata = [{\n  \"id\": \"1\",\n  \"key\": \"1\",\n  \"title\": \"实例.pdf\",\n  \"fileCode\": \"shili\",\n  \"fileName\": \"实例\",\n  \"filePdfPath\": \"实例\"\n}];\nexport default {\n  name: \"JeecgPdfView\",\n  components: {\n    PdfPreviewModal: PdfPreviewModal\n  },\n  data: function data() {\n    return {\n      description: 'PDF预览页面',\n      // 文件类型集\n      treeData: [{\n        title: '所有PDF电子档',\n        key: '0-0',\n        children: mockdata\n      }],\n      // 文件数据集\n      dataSource: mockdata,\n      allData: mockdata,\n      // 上传文件集\n      defaultExpandAll: true,\n      // 加载中\n      spinning: false,\n      url: {\n        pdfList: \"/api/pdfList\"\n      }\n    };\n  },\n  created: function created() {//this.loadData();\n  },\n  methods: {\n    loadData: function loadData() {\n      var _this = this;\n\n      this.spinning = false;\n      getAction(this.url.pdfList).then(function (res) {\n        if (res.length > 0) {\n          _this.allData = res;\n          _this.dataSource = res;\n          _this.treeData[0].children = res;\n        }\n\n        _this.spinning = false;\n      });\n    },\n    pdfPreview: function pdfPreview(title) {\n      var token = Vue.ls.get(ACCESS_TOKEN);\n      this.headers = {\n        \"X-Access-Token\": token\n      };\n      this.$refs.pdfmodal.previewFiles(title, token);\n    },\n    // 选择文件类型\n    onSelect: function onSelect(selectedKeys, info) {\n      this.dataSource = [];\n\n      if (selectedKeys[0] === undefined || selectedKeys[0] === '0-0') {\n        this.dataSource = this.allData;\n      } else {\n        this.dataSource.push(info.node._props.dataRef);\n      }\n\n      console.log(\"SELECT-->dataSource\", this.dataSource);\n    },\n    // model回调\n    modalFormOk: function modalFormOk() {\n      this.loadData();\n    }\n  }\n};",{"version":3,"sources":["JeecgPdfView.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2CA,SAAA,SAAA,QAAA,cAAA;AACA,SAAA,YAAA,QAAA,wBAAA;AACA,OAAA,GAAA,MAAA,KAAA;AACA,OAAA,eAAA;AACA,IAAA,QAAA,GAAA,CAAA;AACA,QAAA,GADA;AAEA,SAAA,GAFA;AAGA,WAAA,QAHA;AAIA,cAAA,OAJA;AAKA,cAAA,IALA;AAMA,iBAAA;AANA,CAAA,CAAA;AASA,eAAA;AACA,EAAA,IAAA,EAAA,cADA;AAEA,EAAA,UAAA,EAAA;AACA,IAAA,eAAA,EAAA;AADA,GAFA;AAKA,EAAA,IALA,kBAKA;AACA,WAAA;AACA,MAAA,WAAA,EAAA,SADA;AAEA;AACA,MAAA,QAAA,EAAA,CAAA;AACA,QAAA,KAAA,EAAA,UADA;AAEA,QAAA,GAAA,EAAA,KAFA;AAGA,QAAA,QAAA,EAAA;AAHA,OAAA,CAHA;AAOA;AACA,MAAA,UAAA,EAAA,QARA;AASA,MAAA,OAAA,EAAA,QATA;AAUA;AACA,MAAA,gBAAA,EAAA,IAXA;AAYA;AACA,MAAA,QAAA,EAAA,KAbA;AAcA,MAAA,GAAA,EAAA;AACA,QAAA,OAAA,EAAA;AADA;AAdA,KAAA;AAkBA,GAxBA;AAyBA,EAAA,OAzBA,qBAyBA,CACA;AACA,GA3BA;AA4BA,EAAA,OAAA,EAAA;AACA,IAAA,QADA,sBACA;AAAA;;AACA,WAAA,QAAA,GAAA,KAAA;AACA,MAAA,SAAA,CAAA,KAAA,GAAA,CAAA,OAAA,CAAA,CAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,YAAA,GAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,UAAA,KAAA,CAAA,OAAA,GAAA,GAAA;AACA,UAAA,KAAA,CAAA,UAAA,GAAA,GAAA;AACA,UAAA,KAAA,CAAA,QAAA,CAAA,CAAA,EAAA,QAAA,GAAA,GAAA;AACA;;AACA,QAAA,KAAA,CAAA,QAAA,GAAA,KAAA;AACA,OAPA;AAQA,KAXA;AAYA,IAAA,UAAA,EAAA,oBAAA,KAAA,EAAA;AACA,UAAA,KAAA,GAAA,GAAA,CAAA,EAAA,CAAA,GAAA,CAAA,YAAA,CAAA;AACA,WAAA,OAAA,GAAA;AAAA,0BAAA;AAAA,OAAA;AACA,WAAA,KAAA,CAAA,QAAA,CAAA,YAAA,CAAA,KAAA,EAAA,KAAA;AACA,KAhBA;AAiBA;AACA,IAAA,QAlBA,oBAkBA,YAlBA,EAkBA,IAlBA,EAkBA;AACA,WAAA,UAAA,GAAA,EAAA;;AACA,UAAA,YAAA,CAAA,CAAA,CAAA,KAAA,SAAA,IAAA,YAAA,CAAA,CAAA,CAAA,KAAA,KAAA,EAAA;AACA,aAAA,UAAA,GAAA,KAAA,OAAA;AACA,OAFA,MAEA;AACA,aAAA,UAAA,CAAA,IAAA,CAAA,IAAA,CAAA,IAAA,CAAA,MAAA,CAAA,OAAA;AACA;;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,qBAAA,EAAA,KAAA,UAAA;AACA,KA1BA;AA2BA;AACA,IAAA,WA5BA,yBA4BA;AACA,WAAA,QAAA;AACA;AA9BA;AA5BA,CAAA","sourcesContent":["<template>\n  <a-card :bordered=\"false\">\n    <!-- 左侧文件树 -->\n    <a-col :span=\"4\" class=\"clName\">\n      <a-tree\n        :treeData=\"treeData\"\n        :defaultExpandAll=\"defaultExpandAll\"\n        @select=\"this.onSelect\"\n        style=\"height: 500px;overflow-y: auto;\"\n      >\n      </a-tree>\n    </a-col>\n    <!-- 中间面板 -->\n    <a-col :span=\"2\"/>\n    <!--右侧缩略图-->\n    <a-col :span=\"18\">\n      <a-spin tip=\"Loading...\" :spinning=\"spinning\">\n        <div v-for=\"(file, key) in dataSource\" :key=\"key\">\n          <a-row>\n            <a-col :span=\"24\"><p><a-divider orientation=\"left\">{{ file.fileName }}</a-divider></p></a-col>\n            <!-- 预览区域 -->\n            <a-col :span=\"24\">\n              <template v-if=\"file.filePdfPath\">\n                <div style=\"float: left;width:104px;height:104px;margin-right: 10px;margin: 0 8px 8px 0;\">\n                  <div style=\"width: 100%;height: 100%;position: relative;padding: 8px;\" @click=\"pdfPreview(file.title)\">\n                    <img style=\"width: 100%;\" src=\"~@/assets/pdf4.jpg\">\n                  </div>\n                </div>\n              </template>\n              <template v-else>\n                (暂无材料，点击右侧\"选择文件\"或\"扫描上传\"上传文件)\n              </template>\n            </a-col>\n          </a-row>\n        </div>\n      </a-spin>\n    </a-col>\n    <pdf-preview-modal ref=\"pdfmodal\"></pdf-preview-modal >\n  </a-card>\n</template>\n\n<script>\n\n  import { getAction } from '@/api/manage'\n  import { ACCESS_TOKEN } from \"@/store/mutation-types\"\n  import Vue from 'vue'\n  import PdfPreviewModal from './modules/PdfPreviewModal'\n  const mockdata=[{\n    \"id\": \"1\",\n    \"key\": \"1\",\n    \"title\": \"实例.pdf\",\n    \"fileCode\": \"shili\",\n    \"fileName\": \"实例\",\n    \"filePdfPath\": \"实例\"\n  }]\n\n  export default {\n    name: \"JeecgPdfView\",\n    components:{\n      PdfPreviewModal\n    },\n    data () {\n      return {\n        description: 'PDF预览页面',\n        // 文件类型集\n        treeData:[{\n          title: '所有PDF电子档',\n          key: '0-0',\n          children: mockdata }],\n        // 文件数据集\n        dataSource: mockdata,\n        allData:mockdata,\n        // 上传文件集\n        defaultExpandAll: true,\n        // 加载中\n        spinning:false,\n        url: {\n          pdfList: \"/api/pdfList\",\n        },\n      }\n    },\n    created() {\n      //this.loadData();\n    },\n    methods: {\n      loadData (){\n        this.spinning = false;\n        getAction(this.url.pdfList).then((res)=>{\n          if(res.length>0){\n            this.allData = res;\n            this.dataSource = res;\n            this.treeData[0].children = res;\n          }\n          this.spinning = false;\n        })\n      },\n      pdfPreview:function(title){\n        const token = Vue.ls.get(ACCESS_TOKEN);\n        this.headers = {\"X-Access-Token\":token}\n        this.$refs.pdfmodal.previewFiles(title,token);\n      },\n      // 选择文件类型\n      onSelect (selectedKeys, info) {\n        this.dataSource = [];\n        if(selectedKeys[0] === undefined || selectedKeys[0] === '0-0'){\n          this.dataSource = this.allData;\n        }else{\n          this.dataSource.push(info.node._props.dataRef);\n        }\n        console.log(\"SELECT-->dataSource\",this.dataSource );\n      },\n      // model回调\n      modalFormOk () {\n        this.loadData();\n      },\n    },\n  }\n</script>\n\n<style scoped>\n  .clName .ant-tree li span.ant-tree-switcher, .ant-tree li span.ant-tree-iconEle{width:10px}\n</style>"],"sourceRoot":"src/views/jeecg"}]}