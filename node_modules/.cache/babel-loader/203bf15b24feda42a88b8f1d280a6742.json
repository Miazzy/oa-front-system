{"remainingRequest":"/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/src/views/system/modules/RoleDataruleModal.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/src/views/system/modules/RoleDataruleModal.vue","mtime":1571018558936},{"path":"/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.split\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport ARow from 'ant-design-vue/es/grid/Row';\nimport ACol from 'ant-design-vue/es/grid/Col';\nimport { getAction, postAction } from '@/api/manage';\nexport default {\n  name: 'RoleDataruleModal',\n  components: {\n    ACol: ACol,\n    ARow: ARow\n  },\n  data: function data() {\n    return {\n      functionId: '',\n      roleId: '',\n      visible: false,\n      tabList: [{\n        key: '1',\n        tab: '数据规则'\n      }, {\n        key: '2',\n        tab: '按钮权限'\n      }],\n      activeTabKey: '1',\n      url: {\n        datarule: \"/sys/role/datarule\"\n      },\n      dataruleList: [],\n      dataruleChecked: []\n    };\n  },\n  methods: {\n    loadData: function loadData() {\n      var _this = this;\n\n      getAction(\"\".concat(this.url.datarule, \"/\").concat(this.functionId, \"/\").concat(this.roleId)).then(function (res) {\n        console.log(res);\n\n        if (res.success) {\n          _this.dataruleList = res.result.datarule;\n          var drChecked = res.result.drChecked;\n\n          if (drChecked) {\n            _this.dataruleChecked = drChecked.split(\",\");\n          }\n        }\n      });\n    },\n    saveDataruleForRole: function saveDataruleForRole() {\n      var _this2 = this;\n\n      if (!this.dataruleChecked || this.dataruleChecked.length == 0) {\n        this.$message.warning(\"请注意，现未勾选任何数据权限!\");\n      }\n\n      var params = {\n        permissionId: this.functionId,\n        roleId: this.roleId,\n        dataRuleIds: this.dataruleChecked.join(\",\")\n      };\n      console.log(\"保存数据权限\", params);\n      postAction(this.url.datarule, params).then(function (res) {\n        if (res.success) {\n          _this2.$message.success(res.message);\n        } else {\n          _this2.$message.error(res.message);\n        }\n      });\n    },\n    show: function show(functionId, roleId) {\n      this.onReset();\n      this.functionId = functionId;\n      this.roleId = roleId;\n      this.visible = true;\n      this.loadData();\n    },\n    onClose: function onClose() {\n      this.visible = false;\n      this.onReset();\n    },\n    onTabChange: function onTabChange(key) {\n      this.activeTabKey = key;\n    },\n    onReset: function onReset() {\n      this.functionId = '';\n      this.roleId = '';\n      this.dataruleList = [];\n      this.dataruleChecked = [];\n    }\n  }\n};",{"version":3,"sources":["RoleDataruleModal.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <a-drawer\n    title=\"数据规则/按钮权限配置\"\n    width=\"365\"\n    :closable=\"false\"\n    @close=\"onClose\"\n    :visible=\"visible\"\n  >\n\n    <a-tabs defaultActiveKey=\"1\">\n      <a-tab-pane tab=\"数据规则\" key=\"1\">\n\n        <a-checkbox-group v-model=\"dataruleChecked\" v-if=\"dataruleList.length>0\">\n          <a-row>\n            <a-col :span=\"24\" v-for=\"(item,index) in dataruleList\" :key=\" 'dr'+index \">\n              <a-checkbox :value=\"item.id\">{{ item.ruleName }}</a-checkbox>\n            </a-col>\n\n            <a-col :span=\"24\">\n              <div style=\"width: 100%;margin-top: 15px\">\n                <a-button @click=\"saveDataruleForRole\" type=\"primary\" size=\"small\" icon=\"save\">点击保存</a-button>\n              </div>\n            </a-col>\n          </a-row>\n        </a-checkbox-group>\n        <div v-else><h3>无配置信息!</h3></div>\n\n      </a-tab-pane>\n      <!--<a-tab-pane tab=\"按钮权限\" key=\"2\">敬请期待!!!</a-tab-pane>-->\n    </a-tabs>\n\n  </a-drawer>\n</template>\n\n<script>\n  import ARow from 'ant-design-vue/es/grid/Row'\n  import ACol from 'ant-design-vue/es/grid/Col'\n  import { getAction,postAction } from '@/api/manage'\n\n  export default {\n    name: 'RoleDataruleModal',\n    components: { ACol, ARow },\n    data(){\n      return {\n        functionId:'',\n        roleId:'',\n        visible:false,\n        tabList: [{\n          key: '1',\n          tab: '数据规则',\n        }, {\n          key: '2',\n          tab: '按钮权限',\n        }],\n        activeTabKey: '1',\n        url:{\n          datarule:\"/sys/role/datarule\",\n        },\n        dataruleList:[],\n        dataruleChecked:[]\n      }\n    },\n    methods:{\n      loadData(){\n        getAction(`${this.url.datarule}/${this.functionId}/${this.roleId}`).then(res=>{\n          console.log(res)\n          if(res.success){\n            this.dataruleList = res.result.datarule\n            let drChecked = res.result.drChecked\n            if(drChecked){\n              this.dataruleChecked = drChecked.split(\",\")\n            }\n          }\n        })\n      },\n      saveDataruleForRole(){\n        if(!this.dataruleChecked || this.dataruleChecked.length==0){\n          this.$message.warning(\"请注意，现未勾选任何数据权限!\")\n        }\n        let params = {\n          permissionId:this.functionId,\n          roleId:this.roleId,\n          dataRuleIds:this.dataruleChecked.join(\",\")\n        }\n        console.log(\"保存数据权限\",params)\n        postAction(this.url.datarule,params).then(res=>{\n          if(res.success){\n            this.$message.success(res.message)\n          }else{\n            this.$message.error(res.message)\n          }\n        })\n      },\n      show(functionId,roleId){\n        this.onReset()\n        this.functionId = functionId\n        this.roleId = roleId\n        this.visible=true\n        this.loadData()\n      },\n      onClose(){\n        this.visible=false\n        this.onReset()\n      },\n      onTabChange (key) {\n        this.activeTabKey = key\n      },\n      onReset(){\n        this.functionId=''\n        this.roleId=''\n        this.dataruleList=[]\n        this.dataruleChecked=[]\n      }\n    }\n  }\n</script>\n\n<style scoped>\n\n</style>"],"sourceRoot":"src/views/system/modules"}]}