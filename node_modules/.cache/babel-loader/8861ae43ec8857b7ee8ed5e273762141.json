{"remainingRequest":"/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/node_modules/babel-loader/lib/index.js!/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/src/components/CountDown/CountDown.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/src/components/CountDown/CountDown.vue","mtime":1571018558889},{"path":"/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/node_modules/cache-loader/dist/cjs.js","mtime":1565525385854},{"path":"/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/node_modules/babel-loader/lib/index.js","mtime":1565533683804},{"path":"/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/node_modules/cache-loader/dist/cjs.js","mtime":1565525385854},{"path":"/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/node_modules/vue-loader/lib/index.js","mtime":1571018827562}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.number.constructor\";\n\n//\n//\n//\n//\n//\n//\nfunction fixedZero(val) {\n  return val * 1 < 10 ? \"0\".concat(val) : val;\n}\n\nexport default {\n  name: \"CountDown\",\n  props: {\n    format: {\n      type: Function,\n      default: undefined\n    },\n    target: {\n      type: [Date, Number],\n      required: true\n    },\n    onEnd: {\n      type: Function,\n      default: function _default() {}\n    }\n  },\n  data: function data() {\n    return {\n      dateTime: '0',\n      originTargetTime: 0,\n      lastTime: 0,\n      timer: 0,\n      interval: 1000\n    };\n  },\n  filters: {\n    format: function format(time) {\n      var hours = 60 * 60 * 1000;\n      var minutes = 60 * 1000;\n      var h = Math.floor(time / hours);\n      var m = Math.floor((time - h * hours) / minutes);\n      var s = Math.floor((time - h * hours - m * minutes) / 1000);\n      return \"\".concat(fixedZero(h), \":\").concat(fixedZero(m), \":\").concat(fixedZero(s));\n    }\n  },\n  created: function created() {\n    this.initTime();\n    this.tick();\n  },\n  methods: {\n    initTime: function initTime() {\n      var lastTime = 0;\n      var targetTime = 0;\n      this.originTargetTime = this.target;\n\n      try {\n        if (Object.prototype.toString.call(this.target) === '[object Date]') {\n          targetTime = this.target;\n        } else {\n          targetTime = new Date(this.target).getTime();\n        }\n      } catch (e) {\n        throw new Error('invalid target prop');\n      }\n\n      lastTime = targetTime - new Date().getTime();\n      this.lastTime = lastTime < 0 ? 0 : lastTime;\n    },\n    tick: function tick() {\n      var _this = this;\n\n      var onEnd = this.onEnd;\n      this.timer = setTimeout(function () {\n        if (_this.lastTime < _this.interval) {\n          clearTimeout(_this.timer);\n          _this.lastTime = 0;\n\n          if (typeof onEnd === 'function') {\n            onEnd();\n          }\n        } else {\n          _this.lastTime -= _this.interval;\n\n          _this.tick();\n        }\n      }, this.interval);\n    }\n  },\n  beforeUpdate: function beforeUpdate() {\n    if (this.originTargetTime !== this.target) {\n      this.initTime();\n    }\n  },\n  beforeDestroy: function beforeDestroy() {\n    clearTimeout(this.timer);\n  }\n};",{"version":3,"sources":["CountDown.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <span>\n    {{ lastTime | format }}\n  </span>\n</template>\n\n<script>\n\n  function fixedZero(val) {\n    return val * 1 < 10 ? `0${val}` : val;\n  }\n\n  export default {\n    name: \"CountDown\",\n    props: {\n      format: {\n        type: Function,\n        default: undefined\n      },\n      target: {\n        type: [Date, Number],\n        required: true,\n      },\n      onEnd: {\n        type: Function,\n        default: () => {\n        }\n      }\n    },\n    data() {\n      return {\n        dateTime: '0',\n        originTargetTime: 0,\n        lastTime: 0,\n        timer: 0,\n        interval: 1000\n      }\n    },\n    filters: {\n      format(time) {\n        const hours = 60 * 60 * 1000;\n        const minutes = 60 * 1000;\n\n        const h = Math.floor(time / hours);\n        const m = Math.floor((time - h * hours) / minutes);\n        const s = Math.floor((time - h * hours - m * minutes) / 1000);\n        return `${fixedZero(h)}:${fixedZero(m)}:${fixedZero(s)}`\n      }\n    },\n    created() {\n      this.initTime()\n      this.tick()\n    },\n    methods: {\n      initTime() {\n        let lastTime = 0;\n        let targetTime = 0;\n        this.originTargetTime = this.target\n        try {\n          if (Object.prototype.toString.call(this.target) === '[object Date]') {\n            targetTime = this.target\n          } else {\n            targetTime = new Date(this.target).getTime()\n          }\n        } catch (e) {\n          throw new Error('invalid target prop')\n        }\n\n        lastTime = targetTime - new Date().getTime();\n\n        this.lastTime = lastTime < 0 ? 0 : lastTime\n      },\n      tick() {\n        const {onEnd} = this\n\n        this.timer = setTimeout(() => {\n          if (this.lastTime < this.interval) {\n            clearTimeout(this.timer)\n            this.lastTime = 0\n            if (typeof onEnd === 'function') {\n              onEnd();\n            }\n          } else {\n            this.lastTime -= this.interval\n            this.tick()\n          }\n        }, this.interval)\n      }\n    },\n    beforeUpdate () {\n      if (this.originTargetTime !== this.target) {\n        this.initTime()\n      }\n    },\n    beforeDestroy() {\n      clearTimeout(this.timer)\n    }\n  }\n</script>\n\n<style scoped>\n\n</style>"],"sourceRoot":"src/components/CountDown"}]}