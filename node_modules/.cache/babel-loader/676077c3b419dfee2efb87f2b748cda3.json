{"remainingRequest":"/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/node_modules/thread-loader/dist/cjs.js!/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/node_modules/babel-loader/lib/index.js!/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/src/views/modules/online/cgform/OnlCgformHeadList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/src/views/modules/online/cgform/OnlCgformHeadList.vue","mtime":1571018558929},{"path":"/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/node_modules/cache-loader/dist/cjs.js","mtime":1565525385854},{"path":"/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/node_modules/thread-loader/dist/cjs.js","mtime":1565525386522},{"path":"/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/node_modules/babel-loader/lib/index.js","mtime":1565533683804},{"path":"/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/node_modules/cache-loader/dist/cjs.js","mtime":1565525385854},{"path":"/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/node_modules/vue-loader/lib/index.js","mtime":1571018827562}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { initDictOptions, filterDictText } from '@/components/dict/JDictSelectUtil';\nimport { deleteAction, postAction } from '@/api/manage';\nimport JDictSelectTag from \"../../../../components/dict/JDictSelectTag.vue\";\nimport { JeecgListMixin } from '@/mixins/JeecgListMixin';\nimport Clipboard from 'clipboard';\nexport default {\n  name: 'OnlCgformHeadList',\n  mixins: [JeecgListMixin],\n  components: {\n    JDictSelectTag: JDictSelectTag\n  },\n  data: function data() {\n    var _this = this;\n\n    return {\n      description: 'Online表单开发管理页面',\n      // 表头\n      columns: [{\n        title: '#',\n        dataIndex: '',\n        key: 'rowIndex',\n        width: 60,\n        align: 'center',\n        customRender: function customRender(t, r, index) {\n          return parseInt(index) + 1;\n        }\n      }, {\n        title: '表类型',\n        align: 'center',\n        dataIndex: 'tableType',\n        customRender: function customRender(text) {\n          return filterDictText(_this.tableTypeDictOptions, \"\".concat(text));\n        }\n      }, {\n        title: '表名',\n        align: 'center',\n        dataIndex: 'tableName'\n      }, {\n        title: '表描述',\n        align: 'center',\n        dataIndex: 'tableTxt'\n      }, {\n        title: '版本',\n        align: 'center',\n        dataIndex: 'tableVersion'\n      }, {\n        title: '同步数据库状态',\n        align: 'center',\n        dataIndex: 'isDbSynch',\n        scopedSlots: {\n          customRender: 'dbsync'\n        }\n      }, {\n        title: '操作',\n        dataIndex: 'action',\n        align: 'center',\n        scopedSlots: {\n          customRender: 'action'\n        }\n      }],\n      url: {\n        list: '/online/cgform/head/list',\n        delete: '/online/cgform/head/delete',\n        deleteBatch: '/online/cgform/head/deleteBatch',\n        doDbSynch: '/online/cgform/api/doDbSynch/',\n        removeRecord: '/online/cgform/head/removeRecord'\n      },\n      tableTypeDictOptions: [],\n      sexDictOptions: [],\n      syncModalVisible: false,\n      syncFormId: '',\n      synMethod: 'normal',\n      syncLoading: false,\n      onlineUrlTitle: '',\n      onlineUrlVisible: false,\n      onlineUrl: '',\n      selectedRowKeys: [],\n      selectedRows: []\n    };\n  },\n  created: function created() {\n    var _this2 = this;\n\n    //初始化字典 - 表类型\n    initDictOptions('cgform_table_type').then(function (res) {\n      if (res.success) {\n        _this2.tableTypeDictOptions = res.result;\n      }\n    });\n    this.loadData();\n  },\n  methods: {\n    doDbSynch: function doDbSynch(id) {\n      var _this3 = this;\n\n      postAction(this.url.doDbSynch + id, {\n        synMethod: '1'\n      }).then(function (res) {\n        if (res.success) {\n          _this3.$message.success(res.message);\n\n          _this3.loadData();\n        } else {\n          _this3.$message.warning(res.message);\n        }\n      });\n    },\n    handleCancleDbSync: function handleCancleDbSync() {\n      this.syncModalVisible = false;\n    },\n    handleDbSync: function handleDbSync() {\n      var _this4 = this;\n\n      this.syncLoading = true;\n      postAction(this.url.doDbSynch + this.syncFormId + '/' + this.synMethod).then(function (res) {\n        _this4.syncModalVisible = false;\n        _this4.syncLoading = false;\n\n        if (res.success) {\n          _this4.$message.success(res.message);\n\n          _this4.loadData();\n        } else {\n          _this4.$message.warning(res.message);\n        }\n      });\n    },\n    openSyncModal: function openSyncModal(id) {\n      this.syncModalVisible = true;\n      this.syncFormId = id;\n    },\n    goPageOnline: function goPageOnline(rd) {\n      if (rd.isTree == 'Y') {\n        this.$router.push({\n          path: '/online/cgformTreeList/' + rd.id\n        });\n      } else {\n        this.$router.push({\n          path: '/online/cgformList/' + rd.id\n        });\n      }\n    },\n    handleOnlineUrlClose: function handleOnlineUrlClose() {\n      this.onlineUrlTitle = '';\n      this.onlineUrlVisible = false;\n    },\n    handleOnlineUrlShow: function handleOnlineUrlShow(record) {\n      if (record.isTree == 'Y') {\n        this.onlineUrl = \"/online/cgformTreeList/\".concat(record.id);\n      } else {\n        this.onlineUrl = \"/online/cgformList/\".concat(record.id);\n      }\n\n      this.onlineUrlVisible = true;\n      this.onlineUrlTitle = '菜单链接[' + record.tableTxt + ']';\n    },\n    handleRemoveRecord: function handleRemoveRecord(id) {\n      var that = this;\n      this.$confirm({\n        title: '确认要移除此记录?',\n        onOk: function onOk() {\n          deleteAction(that.url.removeRecord, {\n            id: id\n          }).then(function (res) {\n            if (res.success) {\n              that.$message.success('移除成功');\n              that.loadData();\n            } else {\n              that.$message.warning(res.message);\n            }\n          });\n        },\n        onCancel: function onCancel() {}\n      });\n    },\n    doEnhanceJs: function doEnhanceJs() {\n      if (!this.selectedRowKeys || this.selectedRowKeys.length != 1) {\n        this.$message.warning('请先选中一条记录');\n        return;\n      }\n\n      this.$refs.ehjs.show(this.selectedRowKeys[0]);\n    },\n    doEnhanceSql: function doEnhanceSql() {\n      if (!this.selectedRowKeys || this.selectedRowKeys.length != 1) {\n        this.$message.warning('请先选中一条记录');\n        return;\n      }\n\n      this.$refs.ehsql.show(this.selectedRowKeys[0]);\n    },\n    doEnhanceJava: function doEnhanceJava() {\n      if (!this.selectedRowKeys || this.selectedRowKeys.length != 1) {\n        this.$message.warning('请先选中一条记录');\n        return;\n      }\n\n      this.$refs.ehjava.show(this.selectedRowKeys[0]);\n    },\n    doCgformButton: function doCgformButton() {\n      if (!this.selectedRowKeys || this.selectedRowKeys.length != 1) {\n        this.$message.warning('请先选中一条记录');\n        return;\n      }\n\n      this.$refs.btnList.show(this.selectedRowKeys[0]); //this.$router.push({ path: '/online/cgformButton/' + this.selectedRowKeys[0] })\n    },\n    importOnlineForm: function importOnlineForm() {\n      this.$refs.transd2o.show();\n    },\n    transOk: function transOk() {\n      this.loadData();\n    },\n    goGenerateCode: function goGenerateCode() {\n      if (!this.selectedRowKeys || this.selectedRowKeys.length != 1) {\n        this.$message.warning('请先选中一条记录');\n        return;\n      }\n\n      var row = this.selectedRows[0];\n\n      if (!row.isDbSynch || row.isDbSynch == 'N') {\n        this.$message.warning('请先同步数据库!');\n        return;\n      }\n\n      if (row.tableType == 3) {\n        this.$message.warning('请选中该表对应的主表生成代码');\n        return;\n      }\n\n      this.$refs.cg.show(this.selectedRowKeys[0]);\n    },\n    onSelectChange: function onSelectChange(keys, rows) {\n      this.selectedRowKeys = keys;\n      this.selectedRows = rows;\n    },\n    onCopyUrl: function onCopyUrl() {\n      var _this5 = this;\n\n      var clipboard = new Clipboard('.copy-this-text');\n      clipboard.on('success', function () {\n        clipboard.destroy();\n\n        _this5.$message.success('复制成功');\n\n        _this5.handleOnlineUrlClose();\n      });\n      clipboard.on('error', function () {\n        _this5.$message.error('该浏览器不支持自动复制');\n\n        clipboard.destroy();\n      });\n    }\n  }\n};",null]}