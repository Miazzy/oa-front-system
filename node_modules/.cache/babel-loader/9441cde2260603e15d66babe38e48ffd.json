{"remainingRequest":"/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/node_modules/babel-loader/lib/index.js!/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/src/views/jeecg/report/ArchivesStatisticst.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/src/views/jeecg/report/ArchivesStatisticst.vue","mtime":1571018558924},{"path":"/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/node_modules/cache-loader/dist/cjs.js","mtime":1565525385854},{"path":"/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/node_modules/babel-loader/lib/index.js","mtime":1565533683804},{"path":"/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/node_modules/cache-loader/dist/cjs.js","mtime":1565525385854},{"path":"/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/node_modules/vue-loader/lib/index.js","mtime":1571018827562}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Bar from '@/components/chart/Bar';\nimport Pie from '@/components/chart/Pie';\nimport ACol from 'ant-design-vue/es/grid/Col';\nimport { getAction } from '@/api/manage';\nexport default {\n  name: 'ArchivesStatisticst',\n  components: {\n    ACol: ACol,\n    Bar: Bar,\n    Pie: Pie\n  },\n  data: function data() {\n    return {\n      description: '档案统计页面',\n      // 查询条件\n      queryParam: {},\n      // 数据集\n      countSource: [],\n      // 柱状图\n      barType: 'year',\n      barDate: ['month', 'month'],\n      barValue: [],\n      // 饼状图\n      pieType: 'year',\n      pieDate: ['month', 'month'],\n      pieValue: [],\n      // 统计图类型\n      tabStatus: \"bar\",\n      url: {\n        getYearCountInfo: \"/api/report/getYearCountInfo\",\n        getMonthCountInfo: \"/api/report/getMonthCountInfo\",\n        getCntrNoCountInfo: \"/api/report/getCntrNoCountInfo\",\n        getCabinetCountInfo: \"/api/report/getCabinetCountInfo\"\n      }\n    };\n  },\n  created: function created() {\n    var url = this.url.getYearCountInfo;\n    this.loadDate(url, 'year', {});\n  },\n  methods: {\n    loadDate: function loadDate(url, type, param) {\n      var _this = this;\n\n      getAction(url, param, 'get').then(function (res) {\n        if (res.success) {\n          _this.countSource = [];\n\n          if (type === 'year') {\n            _this.getYearCountSource(res.result);\n          }\n\n          if (type === 'month') {\n            _this.getMonthCountSource(res.result);\n          }\n\n          if (type === 'category') {\n            _this.getCategoryCountSource(res.result);\n          }\n\n          if (type === 'cabinet') {\n            _this.getCabinetCountSource(res.result);\n          }\n        } else {\n          var that = _this;\n          that.$message.warning(res.message);\n        }\n      });\n    },\n    getYearCountSource: function getYearCountSource(data) {\n      for (var i = 0; i < data.length; i++) {\n        if (this.tabStatus === \"bar\") {\n          this.countSource.push({\n            x: \"\".concat(data[i].year, \"\\u5E74\"),\n            y: data[i].yearcount\n          });\n        } else {\n          this.countSource.push({\n            item: \"\".concat(data[i].year, \"\\u5E74\"),\n            count: data[i].yearcount\n          });\n        }\n      }\n    },\n    getMonthCountSource: function getMonthCountSource(data) {\n      for (var i = 0; i < data.length; i++) {\n        if (this.tabStatus === \"bar\") {\n          this.countSource.push({\n            x: data[i].month,\n            y: data[i].monthcount\n          });\n        } else {\n          this.countSource.push({\n            item: data[i].month,\n            count: data[i].monthcount\n          });\n        }\n      }\n    },\n    getCategoryCountSource: function getCategoryCountSource(data) {\n      for (var i = 0; i < data.length; i++) {\n        if (this.tabStatus === \"bar\") {\n          this.countSource.push({\n            x: data[i].classifyname,\n            y: data[i].cntrnocount\n          });\n        } else {\n          this.countSource.push({\n            item: data[i].classifyname,\n            count: data[i].cntrnocount\n          });\n        }\n      }\n    },\n    getCabinetCountSource: function getCabinetCountSource(data) {\n      for (var i = 0; i < data.length; i++) {\n        if (this.tabStatus === \"bar\") {\n          this.countSource.push({\n            x: data[i].cabinetname,\n            y: data[i].cabinetcocunt\n          });\n        } else {\n          this.countSource.push({\n            item: data[i].cabinetname,\n            count: data[i].cabinetcocunt\n          });\n        }\n      }\n    },\n    // 选择统计图类别\n    callback: function callback(key) {\n      if (key === \"1\") {\n        this.tabStatus = \"bar\";\n        this.queryDatebar();\n      } else {\n        this.tabStatus = \"pie\";\n        this.queryDatepie();\n      }\n    },\n    // 选择统计类别\n    statisticst: function statisticst(e) {\n      if (this.tabStatus === \"pie\") {\n        this.pieType = e.target.value;\n        this.queryDatepie();\n      } else {\n        this.barType = e.target.value;\n        this.queryDatebar();\n      }\n    },\n    // 按月份查询\n    queryDatebar: function queryDatebar() {\n      if (this.barValue.length > 0) {\n        this.getUrl(this.barType, {\n          startTime: this.barValue[0]._d,\n          endTime: this.barValue[1]._d\n        });\n      } else {\n        this.getUrl(this.barType, {});\n      }\n    },\n    queryDatepie: function queryDatepie() {\n      if (this.pieValue.length > 0) {\n        this.getUrl(this.pieType, {\n          startTime: this.pieValue[0]._d,\n          endTime: this.pieValue[1]._d\n        });\n      } else {\n        this.getUrl(this.pieType, {});\n      }\n    },\n    searchReset: function searchReset() {\n      console.log(this.tabStatus);\n\n      if (this.tabStatus === \"pie\") {\n        this.pieValue = [];\n      } else {\n        this.barValue = [];\n      }\n\n      this.getUrl(this.barType, {});\n    },\n    // 选择请求url\n    getUrl: function getUrl(type, param) {\n      var url = \"\";\n\n      if (type === 'year') {\n        url = this.url.getYearCountInfo;\n      }\n\n      if (type === 'month') {\n        url = this.url.getMonthCountInfo;\n      }\n\n      if (type === 'category') {\n        url = this.url.getCntrNoCountInfo;\n      }\n\n      if (type === 'cabinet') {\n        url = this.url.getCabinetCountInfo;\n      }\n\n      this.loadDate(url, type, param);\n    },\n    // 选择月份日期\n    handleBarDate: function handleBarDate(value, mode) {\n      this.barValue = value;\n      this.barDate = [mode[0] === 'date' ? 'month' : mode[0], mode[1] === 'date' ? 'month' : mode[1]];\n    },\n    handlePieDate: function handlePieDate(value, mode) {\n      this.pieValue = value;\n      this.pieDate = [mode[0] === 'date' ? 'month' : mode[0], mode[1] === 'date' ? 'month' : mode[1]];\n    }\n  }\n};",{"version":3,"sources":["ArchivesStatisticst.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <a-card :bordered=\"false\">\n    <a-tabs defaultActiveKey=\"1\" @change=\"callback\">\n      <a-tab-pane tab=\"柱状图\" key=\"1\">\n        <a-row :gutter=\"24\">\n          <a-col :span=\"10\">\n            <a-radio-group :value=\"barType\" @change=\"statisticst\">\n              <a-radio-button value=\"year\">按年统计</a-radio-button>\n              <a-radio-button value=\"month\">按月统计</a-radio-button>\n              <a-radio-button value=\"category\">按类别统计</a-radio-button>\n              <a-radio-button value=\"cabinet\">按柜号统计</a-radio-button>\n            </a-radio-group>\n          </a-col>\n          <a-col :span=\"14\">\n            <a-form v-if=\"barType === 'month' && false\" layout=\"inline\" style=\"margin-top: -4px\">\n              <a-form-item label=\"月份区间\">\n                <a-range-picker\n                  :placeholder=\"['开始月份', '结束月份']\"\n                  format=\"YYYY-MM\"\n                  :value=\"barValue\"\n                  :mode=\"barDate\"\n                  @panelChange=\"handleBarDate\"/>\n              </a-form-item>\n              <a-button style=\"margin-top: 2px\" type=\"primary\" icon=\"search\" @click=\"queryDatebar\">查询</a-button>\n              <a-button style=\"margin-top: 2px;margin-left: 8px\" type=\"primary\" icon=\"reload\" @click=\"searchReset\">重置</a-button>\n            </a-form>\n          </a-col>\n          <bar class=\"statistic\" title=\"档案统计\" :dataSource=\"countSource\" :height=\"400\"/>\n        </a-row>\n      </a-tab-pane>\n\n      <a-tab-pane tab=\"饼状图\" key=\"2\">\n        <a-row :gutter=\"24\">\n          <a-col :span=\"10\">\n            <a-radio-group :value=\"pieType\" @change=\"statisticst\">\n              <a-radio-button value=\"year\">按年统计</a-radio-button>\n              <a-radio-button value=\"month\">按月统计</a-radio-button>\n              <a-radio-button value=\"category\">按类别统计</a-radio-button>\n              <a-radio-button value=\"cabinet\">按柜号统计</a-radio-button>\n            </a-radio-group>\n          </a-col>\n          <a-col :span=\"14\">\n            <a-form v-if=\"pieType === 'month' && false\" layout=\"inline\" style=\"margin-top: -4px\">\n              <a-row :gutter=\"24\">\n                <a-form-item label=\"月份区间\">\n                  <a-range-picker\n                    :placeholder=\"['开始月份', '结束月份']\"\n                    format=\"YYYY-MM\"\n                    :value=\"pieValue\"\n                    :mode=\"pieDate\"\n                    @panelChange=\"handlePieDate\"/>\n                </a-form-item>\n                <a-button style=\"margin-top: 2px\" type=\"primary\" icon=\"search\" @click=\"queryDatepie\">查询</a-button>\n                <a-button style=\"margin-top: 2px;margin-left: 8px\" type=\"primary\" icon=\"reload\" @click=\"searchReset\">重置</a-button>\n              </a-row>\n            </a-form>\n          </a-col>\n          <pie class=\"statistic\" title=\"档案统计\" :dataSource=\"countSource\" :height=\"450\"/>\n        </a-row>\n      </a-tab-pane>\n    </a-tabs>\n  </a-card>\n</template>\n\n<script>\n  import Bar from '@/components/chart/Bar'\n  import Pie from '@/components/chart/Pie'\n  import ACol from 'ant-design-vue/es/grid/Col'\n  import { getAction } from '@/api/manage'\n\n  export default {\n    name: 'ArchivesStatisticst',\n    components: {\n      ACol,\n      Bar,\n      Pie\n    },\n    data() {\n      return {\n        description: '档案统计页面',\n        // 查询条件\n        queryParam: {},\n        // 数据集\n        countSource: [],\n        // 柱状图\n        barType: 'year',\n        barDate: ['month', 'month'],\n        barValue: [],\n        // 饼状图\n        pieType: 'year',\n        pieDate: ['month', 'month'],\n        pieValue: [],\n        // 统计图类型\n        tabStatus:\"bar\",\n        url: {\n          getYearCountInfo: \"/api/report/getYearCountInfo\",\n          getMonthCountInfo:\"/api/report/getMonthCountInfo\",\n          getCntrNoCountInfo:\"/api/report/getCntrNoCountInfo\",\n          getCabinetCountInfo:\"/api/report/getCabinetCountInfo\",\n        },\n      }\n    },\n    created() {\n      let url = this.url.getYearCountInfo;\n      this.loadDate(url,'year',{});\n    },\n    methods: {\n      loadDate(url,type,param) {\n        getAction(url,param,'get').then((res) => {\n          if (res.success) {\n            this.countSource = [];\n            if(type === 'year'){\n              this.getYearCountSource(res.result);\n            }\n            if(type === 'month'){\n              this.getMonthCountSource(res.result);\n            }\n            if(type === 'category'){\n              this.getCategoryCountSource(res.result);\n            }\n            if(type === 'cabinet'){\n              this.getCabinetCountSource(res.result);\n            }\n          }else{\n            var that=this;\n            that.$message.warning(res.message);\n          }\n        })\n      },\n      getYearCountSource(data){\n        for (let i = 0; i < data.length; i++) {\n          if(this.tabStatus === \"bar\"){\n            this.countSource.push({\n              x: `${data[i].year}年`,\n              y: data[i].yearcount\n            })\n          }else{\n            this.countSource.push({\n              item: `${data[i].year}年`,\n              count:data[i].yearcount\n            })\n          }\n        }\n      },\n      getMonthCountSource(data){\n        for (let i = 0; i < data.length; i++) {\n          if(this.tabStatus === \"bar\"){\n            this.countSource.push({\n              x: data[i].month,\n              y: data[i].monthcount\n            })\n          }else{\n            this.countSource.push({\n              item: data[i].month,\n              count:data[i].monthcount\n            })\n          }\n        }\n      },\n      getCategoryCountSource(data){\n        for (let i = 0; i < data.length; i++) {\n          if(this.tabStatus ===\"bar\"){\n            this.countSource.push({\n              x: data[i].classifyname,\n              y: data[i].cntrnocount\n            })\n          }else{\n            this.countSource.push({\n              item: data[i].classifyname,\n              count:data[i].cntrnocount\n            })\n          }\n        }\n      },\n      getCabinetCountSource(data){\n        for (let i = 0; i < data.length; i++) {\n          if(this.tabStatus === \"bar\"){\n            this.countSource.push({\n              x: data[i].cabinetname,\n              y: data[i].cabinetcocunt\n            })\n          }else{\n            this.countSource.push({\n              item: data[i].cabinetname,\n              count:data[i].cabinetcocunt\n            })\n          }\n        }\n      },\n      // 选择统计图类别\n      callback(key) {\n        if(key === \"1\"){\n          this.tabStatus = \"bar\";\n          this.queryDatebar();\n        }else{\n          this.tabStatus = \"pie\";\n          this.queryDatepie();\n        }\n      },\n      // 选择统计类别\n      statisticst(e) {\n        if(this.tabStatus === \"pie\"){\n          this.pieType = e.target.value;\n          this.queryDatepie();\n        }else{\n          this.barType = e.target.value;\n          this.queryDatebar();\n        }\n      },\n      // 按月份查询\n      queryDatebar(){\n        if(this.barValue.length>0){\n          this.getUrl(this.barType,{startTime:this.barValue[0]._d,endTime:this.barValue[1]._d});\n        }else{\n          this.getUrl(this.barType,{});\n        }\n      },\n      queryDatepie(){\n        if(this.pieValue.length>0){\n          this.getUrl(this.pieType,{startTime:this.pieValue[0]._d,endTime:this.pieValue[1]._d});\n        }else{\n          this.getUrl(this.pieType,{});\n        }\n      },\n      searchReset(){\n        console.log(this.tabStatus);\n        if(this.tabStatus === \"pie\"){\n          this.pieValue = [];\n        }else{\n          this.barValue = [];\n        }\n        this.getUrl(this.barType,{});\n      },\n      // 选择请求url\n      getUrl(type,param){\n        let url = \"\";\n        if(type === 'year'){\n          url = this.url.getYearCountInfo;\n        }\n        if(type === 'month'){\n          url = this.url.getMonthCountInfo;\n        }\n        if(type === 'category'){\n          url = this.url.getCntrNoCountInfo;\n        }\n        if(type === 'cabinet'){\n          url = this.url.getCabinetCountInfo;\n        }\n        this.loadDate(url,type,param);\n      },\n      // 选择月份日期\n      handleBarDate(value, mode) {\n        this.barValue = value\n        this.barDate = [\n          mode[0] === 'date' ? 'month' : mode[0],\n          mode[1] === 'date' ? 'month' : mode[1]\n        ]\n      },\n      handlePieDate(value, mode) {\n        this.pieValue = value\n        this.pieDate = [\n          mode[0] === 'date' ? 'month' : mode[0],\n          mode[1] === 'date' ? 'month' : mode[1]\n        ]\n      },\n    }\n  }\n</script>\n<style scoped>\n  .ant-card-body .table-operator {\n    margin-bottom: 18px;\n  }\n\n  .ant-table-tbody .ant-table-row td {\n    padding-top: 15px;\n    padding-bottom: 15px;\n  }\n\n  .anty-row-operator button {\n    margin: 0 5px\n  }\n\n  .ant-btn-danger {\n    background-color: #ffffff\n  }\n\n  .ant-modal-cust-warp {\n    height: 100%\n  }\n\n  .ant-modal-cust-warp .ant-modal-body {\n    height: calc(100% - 110px) !important;\n    overflow-y: auto\n  }\n\n  .ant-modal-cust-warp .ant-modal-content {\n    height: 90% !important;\n    overflow-y: hidden\n  }\n\n  .statistic {\n    padding: 0px !important;\n    margin-top: 50px;\n  }\n\n  .statistic h4 {\n    margin-bottom: 20px;\n    text-align: center !important;\n    font-size: 24px !important;;\n  }\n\n  .statistic #canvas_1 {\n    width: 100% !important;\n  }\n</style>"],"sourceRoot":"src/views/jeecg/report"}]}