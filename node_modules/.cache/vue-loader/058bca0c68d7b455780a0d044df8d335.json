{"remainingRequest":"/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/src/views/jeecg/JeecgPdfView.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/src/views/jeecg/JeecgPdfView.vue","mtime":1571018558919},{"path":"/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/node_modules/cache-loader/dist/cjs.js","mtime":1565525385854},{"path":"/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/node_modules/thread-loader/dist/cjs.js","mtime":1565525386522},{"path":"/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/node_modules/babel-loader/lib/index.js","mtime":1565533683804},{"path":"/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/node_modules/cache-loader/dist/cjs.js","mtime":1565525385854},{"path":"/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/node_modules/vue-loader/lib/index.js","mtime":1571018827562}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nimport { getAction } from '@/api/manage'\nimport { ACCESS_TOKEN } from \"@/store/mutation-types\"\nimport Vue from 'vue'\nimport PdfPreviewModal from './modules/PdfPreviewModal'\nconst mockdata=[{\n  \"id\": \"1\",\n  \"key\": \"1\",\n  \"title\": \"实例.pdf\",\n  \"fileCode\": \"shili\",\n  \"fileName\": \"实例\",\n  \"filePdfPath\": \"实例\"\n}]\n\nexport default {\n  name: \"JeecgPdfView\",\n  components:{\n    PdfPreviewModal\n  },\n  data () {\n    return {\n      description: 'PDF预览页面',\n      // 文件类型集\n      treeData:[{\n        title: '所有PDF电子档',\n        key: '0-0',\n        children: mockdata }],\n      // 文件数据集\n      dataSource: mockdata,\n      allData:mockdata,\n      // 上传文件集\n      defaultExpandAll: true,\n      // 加载中\n      spinning:false,\n      url: {\n        pdfList: \"/api/pdfList\",\n      },\n    }\n  },\n  created() {\n    //this.loadData();\n  },\n  methods: {\n    loadData (){\n      this.spinning = false;\n      getAction(this.url.pdfList).then((res)=>{\n        if(res.length>0){\n          this.allData = res;\n          this.dataSource = res;\n          this.treeData[0].children = res;\n        }\n        this.spinning = false;\n      })\n    },\n    pdfPreview:function(title){\n      const token = Vue.ls.get(ACCESS_TOKEN);\n      this.headers = {\"X-Access-Token\":token}\n      this.$refs.pdfmodal.previewFiles(title,token);\n    },\n    // 选择文件类型\n    onSelect (selectedKeys, info) {\n      this.dataSource = [];\n      if(selectedKeys[0] === undefined || selectedKeys[0] === '0-0'){\n        this.dataSource = this.allData;\n      }else{\n        this.dataSource.push(info.node._props.dataRef);\n      }\n      console.log(\"SELECT-->dataSource\",this.dataSource );\n    },\n    // model回调\n    modalFormOk () {\n      this.loadData();\n    },\n  },\n}\n",null]}