{"remainingRequest":"/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/src/views/list/PermissionList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/src/views/list/PermissionList.vue","mtime":1571018558925},{"path":"/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/node_modules/cache-loader/dist/cjs.js","mtime":1565525385854},{"path":"/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/node_modules/thread-loader/dist/cjs.js","mtime":1565525386522},{"path":"/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/node_modules/babel-loader/lib/index.js","mtime":1565533683804},{"path":"/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/node_modules/cache-loader/dist/cjs.js","mtime":1565525385854},{"path":"/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/node_modules/vue-loader/lib/index.js","mtime":1571018827562}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport STable from '@/components/table/'\n\nexport default {\n  name: \"TableList\",\n  components: {\n    STable\n  },\n  data () {\n    return {\n      description: '列表使用场景：后台管理中的权限管理以及角色管理，可用于基于 RBAC 设计的角色权限控制，颗粒度细到每一个操作类型。',\n\n      visible: false,\n      labelCol: {\n        xs: { span: 24 },\n        sm: { span: 5 },\n      },\n      wrapperCol: {\n        xs: { span: 24 },\n        sm: { span: 16 },\n      },\n      form: null,\n      mdl: {},\n\n      // 高级搜索 展开/关闭\n      advanced: false,\n      // 查询参数\n      queryParam: {},\n      // 表头\n      columns: [\n        {\n          title: '唯一识别码',\n          dataIndex: 'id'\n        },\n        {\n          title: '权限名称',\n          dataIndex: 'name',\n        },\n        {\n          title: '可操作权限',\n          dataIndex: 'actions',\n          scopedSlots: { customRender: 'actions' },\n        },\n        {\n          title: '状态',\n          dataIndex: 'status',\n          scopedSlots: { customRender: 'status' },\n        },\n        {\n          title: '操作',\n          width: '150px',\n          dataIndex: 'action',\n          scopedSlots: { customRender: 'action' },\n        }\n      ],\n      // 向后端拉取可以用的操作列表\n      permissionList: null,\n      // 加载数据方法 必须为 Promise 对象\n      loadData: parameter => {\n        return this.$http.get('/api/permission', {\n          params: Object.assign(parameter, this.queryParam)\n        }).then(res => {\n          let result = res.result\n          result.data.map(permission => {\n              permission.actionList = JSON.parse(permission.actionData)\n              return permission\n            })\n          return result\n        })\n      },\n\n      selectedRowKeys: [],\n      selectedRows: []\n    }\n  },\n  filters: {\n    statusFilter(status) {\n      const statusMap = {\n        1: '正常',\n        2: '禁用'\n      }\n      return statusMap[status]\n    }\n  },\n  created () {\n    this.loadPermissionList()\n  },\n  methods: {\n    loadPermissionList () {\n      // permissionList\n      new Promise((resolve => {\n        const data = [\n          { label: '新增', value: 'add', defaultChecked: false },\n          { label: '查询', value: 'get', defaultChecked: false },\n          { label: '修改', value: 'update', defaultChecked: false },\n          { label: '列表', value: 'query', defaultChecked: false },\n          { label: '删除', value: 'delete', defaultChecked: false },\n          { label: '导入', value: 'import', defaultChecked: false },\n          { label: '导出', value: 'export', defaultChecked: false }\n        ]\n        setTimeout(resolve(data), 1500)\n      })).then(res => {\n        this.permissionList = res\n      })\n    },\n    handleEdit (record) {\n      this.mdl = Object.assign({}, record)\n      console.log(this.mdl)\n      this.visible = true\n    },\n    handleOk () {\n\n    },\n    onChange (selectedRowKeys, selectedRows) {\n      this.selectedRowKeys = selectedRowKeys\n      this.selectedRows = selectedRows\n    },\n    toggleAdvanced () {\n      this.advanced = !this.advanced\n    },\n  },\n  watch: {\n    /*\n    'selectedRows': function (selectedRows) {\n      this.needTotalList = this.needTotalList.map(item => {\n        return {\n          ...item,\n          total: selectedRows.reduce( (sum, val) => {\n            return sum + val[item.dataIndex]\n          }, 0)\n        }\n      })\n    }\n    */\n  }\n}\n",null]}