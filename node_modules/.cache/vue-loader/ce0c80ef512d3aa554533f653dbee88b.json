{"remainingRequest":"/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/src/components/page/GlobalHeader.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/src/components/page/GlobalHeader.vue","mtime":1571018558903},{"path":"/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/node_modules/cache-loader/dist/cjs.js","mtime":1565525385854},{"path":"/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/node_modules/thread-loader/dist/cjs.js","mtime":1565525386522},{"path":"/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/node_modules/babel-loader/lib/index.js","mtime":1565533683804},{"path":"/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/node_modules/cache-loader/dist/cjs.js","mtime":1565525385854},{"path":"/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/node_modules/vue-loader/lib/index.js","mtime":1571018827562}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport UserMenu from '../tools/UserMenu'\nimport SMenu from '../menu/'\nimport Logo from '../tools/Logo'\n\nimport { mixin } from '@/utils/mixin.js'\n\nexport default {\n  name: 'GlobalHeader',\n  components: {\n    UserMenu,\n    SMenu,\n    Logo\n  },\n  mixins: [mixin],\n  props: {\n    mode: {\n      type: String,\n      // sidemenu, topmenu\n      default: 'sidemenu'\n    },\n    menus: {\n      type: Array,\n      required: true\n    },\n    theme: {\n      type: String,\n      required: false,\n      default: 'dark'\n    },\n    collapsed: {\n      type: Boolean,\n      required: false,\n      default: false\n    },\n    device: {\n      type: String,\n      required: false,\n      default: 'desktop'\n    }\n  },\n  data() {\n    return {\n      headerBarFixed: false,\n      //update-begin--author:sunjianlei---date:20190508------for: 顶部导航栏过长时显示更多按钮-----\n      topMenuStyle: {\n        headerIndexLeft: {},\n        topNavHeader: {},\n        headerIndexRight: {},\n        topSmenuStyle: {}\n      }\n    }\n  },\n  watch: {\n    /** 监听设备变化 */\n    device() {\n      if (this.mode === 'topmenu') {\n        this.buildTopMenuStyle()\n      }\n    },\n    /** 监听导航栏模式变化 */\n    mode(newVal) {\n      if (newVal === 'topmenu') {\n        this.buildTopMenuStyle()\n      }\n    }\n  },\n  //update-end--author:sunjianlei---date:20190508------for: 顶部导航栏过长时显示更多按钮-----\n  mounted() {\n    window.addEventListener('scroll', this.handleScroll)\n    //update-begin--author:sunjianlei---date:20190508------for: 顶部导航栏过长时显示更多按钮-----\n    if (this.mode === 'topmenu') {\n      this.buildTopMenuStyle()\n    }\n    //update-end--author:sunjianlei---date:20190508------for: 顶部导航栏过长时显示更多按钮-----\n  },\n  methods: {\n    handleScroll() {\n      if (this.autoHideHeader) {\n        let scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop\n        if (scrollTop > 100) {\n          this.headerBarFixed = true\n        } else {\n          this.headerBarFixed = false\n        }\n      } else {\n        this.headerBarFixed = false\n      }\n    },\n    toggle() {\n      this.$emit('toggle')\n    },\n    //update-begin--author:sunjianlei---date:20190508------for: 顶部导航栏过长时显示更多按钮-----\n    buildTopMenuStyle() {\n      if (this.mode === 'topmenu') {\n        if (this.device === 'mobile') {\n          // 手机端需要清空样式，否则显示会错乱\n          this.topMenuStyle.topNavHeader = {}\n          this.topMenuStyle.topSmenuStyle = {}\n          this.topMenuStyle.headerIndexRight = {}\n          this.topMenuStyle.headerIndexLeft = {}\n        } else {\n          let rightWidth = '360px'\n          this.topMenuStyle.topNavHeader = { 'min-width': '165px' }\n          this.topMenuStyle.topSmenuStyle = { 'width': 'calc(100% - 165px)' }\n          this.topMenuStyle.headerIndexRight = { 'min-width': rightWidth }\n          this.topMenuStyle.headerIndexLeft = { 'width': `calc(100% - ${rightWidth})` }\n        }\n      }\n    }\n    //update-begin--author:sunjianlei---date:20190508------for: 顶部导航栏过长时显示更多按钮-----\n  }\n}\n",null]}