{"remainingRequest":"/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/src/views/system/modules/DataLogCompareModal.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/src/views/system/modules/DataLogCompareModal.vue","mtime":1571018558934},{"path":"/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/node_modules/cache-loader/dist/cjs.js","mtime":1565525385854},{"path":"/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/node_modules/thread-loader/dist/cjs.js","mtime":1565525386522},{"path":"/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/node_modules/babel-loader/lib/index.js","mtime":1565533683804},{"path":"/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/node_modules/cache-loader/dist/cjs.js","mtime":1565525385854},{"path":"/Users/yunwisdom/Workspace/jeecg-boot/ant-design-vue-jeecg/node_modules/vue-loader/lib/index.js","mtime":1571018827562}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {getAction} from '@/api/manage'\n\nexport default {\n  name: 'DataLogCompareModal',\n  data() {\n    return {\n      modalWidth: 1000,\n      modaltoggleFlag: true,\n      confirmDirty: false,\n      title: '操作',\n      visible: false,\n      model: {},\n      confirmLoading: false,\n      headers: {},\n      //版本号\n      dataVersion1Num:'',\n      dataVersion2Num:'',\n      //表头\n      columns: [\n        {\n          title: '字段名',\n          align: 'left',\n          dataIndex: 'code',\n          width: '30%',\n        }, {\n          align: 'left',\n          dataIndex: 'dataVersion1',\n          width: '30%',\n          slots: { title: 'dataVersionTitle1' },\n        }, {\n          title: '',\n          dataIndex: 'imgshow',\n          align: 'center',\n          scopedSlots: {customRender: \"avatarslot\"},\n          width: '10%',\n        }, {\n          align: 'left',\n          dataIndex: 'dataVersion2',\n          width: '30%',\n          slots: { title: 'dataVersionTitle2' },\n        }\n      ],\n      //数据集\n      dataSource: [],\n      loading: false,\n      url: {\n        queryCompareUrl: \"/sys/dataLog/queryCompareList\",\n      },\n    }\n  },\n  created() {\n\n  },\n  methods: {\n    loadData(dataId1, dataId2) {\n      this.dataSource = [];\n      let that = this;\n      getAction(that.url.queryCompareUrl, {dataId1: dataId1, dataId2: dataId2}).then((res) => {\n        if (res.success) {\n          that.dataVersion1Num = res.result[0].dataVersion;\n          that.dataVersion2Num = res.result[1].dataVersion;\n          let json1 = JSON.parse(res.result[0].dataContent);\n          let json2 = JSON.parse(res.result[1].dataContent);\n          for (var item1 in json1) {\n            for (var item2 in json2) {\n              if (item1 == item2) {\n                this.dataSource.push({\n                  code: item1,\n                  imgshow: '',\n                  dataVersion1: json1[item1],\n                  dataVersion2: json2[item2],\n                })\n              }\n            }\n          }\n        } else {\n          console.log(res.message);\n        }\n      })\n    },\n    compareModal(dataId1, dataId2) {\n      this.visible = true\n      this.loadData(dataId1, dataId2);\n    },\n    handleCancel() {\n      this.close()\n    },\n    modalFormOk() {\n    },\n    close() {\n      this.$emit('close');\n      this.visible = false;\n      this.disableSubmit = false;\n    },\n    setdataCss(record) {\n      let className = 'trcolor';\n      const dataVersion1 = record.dataVersion1;\n      const dataVersion2 = record.dataVersion2;\n      if (dataVersion1 != dataVersion2) {\n        return className;\n      }\n    },\n    getAvatarView: function (avatar) {\n      if (avatar.dataVersion1 != avatar.dataVersion2) {\n        return \"/goright.png\";\n      } else {\n        return \"\";\n      }\n    },\n  }\n}\n",null]}